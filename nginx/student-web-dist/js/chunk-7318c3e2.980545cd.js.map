{"version":3,"sources":["webpack:///./src/views/kur/coursecontent.vue?779a","webpack:///./src/views/kur/coursecontent.vue","webpack:///./src/views/kur/coursecontent.vue?80bb","webpack:///./src/views/kur/coursecontent.vue?8795","webpack:///./src/api/syllabus.js","webpack:///./node_modules/core-js/modules/es6.array.find.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","width","attrs","data","contentList","on","row-click","handleRowClick","select","handleSelection","type","property","label","scopedSlots","_u","key","fn","scope","row","isValidated","_v","_s","tagStatus","margin-top","align","click","$event","SendContents","staticRenderFns","CourseContent","_Vue","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","selectedContentList","completedList","inherits","createClass","value","isChecked","rows","_this2","forEach","$refs","multipleTable","toggleRowSelection","selection","_this3","finalArray","completedContent","content","id","push","is_validated","syllabusId","waitForValidate","toggleSelection","_SendContents","asyncToGenerator","regeneratorRuntime","mark","_callee2","_this4","wrap","_context2","prev","next","console","info","_ref","_callee","contentInfo","_ref2","usm","_context","find","c","undefined","userId","AdminCreateUserSyllabus","sent","AdminValidateUserSyllabusObjectById","AdminDeleteUserSyllabusObjectById","stop","_x","$router","go","_created","_callee3","_ref3","_ref4","_data","_context3","GetContentsBySyllabusId","courseId","AdminGetUserSyllabusAsync","user","content__syllabus","log","compareContentArrays","t0","error","created","Vue","tslib_1","Prop","String","prototype","Component","kur_coursecontentvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","__webpack_require__","d","GetLevelsAsync","GetCoursesByLevelAsync","_utils_request__WEBPACK_IMPORTED_MODULE_0__","service","request","url","method","level","concat","sylId","urlParams","params","$export","$find","KEY","forced","Array","P","F","callbackfn","length"],"mappings":"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","file":"js/chunk-7318c3e2.980545cd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.contentList},on:{\"row-click\":_vm.handleRowClick,\"select\":_vm.handleSelection}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"property\":\"name\",\"label\":\"İçerik\"}}),_c('el-table-column',{scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.isValidated === true ? 'success' : 'warning'}},[_vm._v(\"\\n                    \"+_vm._s(_vm.tagStatus(scope.row))+\"\\n                \")])]}}])})],1),_c('el-row',[_c('el-col',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.SendContents()}}},[_vm._v(\"Kaydet\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as tslib_1 from \"tslib\";\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { AdminCreateUserSyllabus, AdminDeleteUserSyllabusObjectById, AdminGetUserSyllabusAsync, AdminValidateUserSyllabusObjectById, GetContentsBySyllabusId } from \"@/api/syllabus\";\nlet CourseContent = class CourseContent extends Vue {\n    constructor() {\n        super(...arguments);\n        this.contentList = [];\n        this.selectedContentList = [];\n        this.completedList = [];\n    }\n    tagStatus(row) {\n        if (row.isValidated === true)\n            return 'Onaylandı';\n        else {\n            if (row.isChecked)\n                return 'Onay Bekliyor';\n            return 'Tamamlanmadı.';\n        }\n    }\n    toggleSelection(rows) {\n        rows.forEach(row => {\n            this.$refs.multipleTable.toggleRowSelection(row, true);\n        });\n    }\n    handleSelection(selection) {\n        this.selectedContentList = selection;\n    }\n    handleRowClick(row) {\n        this.$refs.multipleTable.toggleRowSelection(row);\n    }\n    compareContentArrays() {\n        const finalArray = [];\n        //setTimeout(() => ( console.log(\"wait\") ), 1000);\n        this.completedList.forEach(completedContent => this.contentList.forEach(content => {\n            if (completedContent.content === content.id) {\n                finalArray.push(content);\n                content.isValidated = completedContent.is_validated === true;\n                content.isChecked = true;\n                content.syllabusId = completedContent.id;\n                content.waitForValidate = content.isChecked && !content.isValidated;\n            }\n        }));\n        this.toggleSelection(finalArray);\n    }\n    async SendContents() {\n        console.info(\"Bismillah\");\n        this.contentList.forEach(async (content) => {\n            const isChecked = this.selectedContentList.find((c) => {\n                return c.id == content.id;\n            });\n            if (isChecked) {\n                // vakıf onaylamadı.\n                if (content.isValidated === undefined) {\n                    // daha önceden göndermedi.\n                    if (content.waitForValidate === undefined) {\n                        let contentInfo = {\n                            content: content.id\n                        };\n                        if (this.userId === undefined) {\n                        }\n                        else {\n                            contentInfo[\"user\"] = this.userId;\n                            const { data: usm } = await AdminCreateUserSyllabus(contentInfo);\n                            await AdminValidateUserSyllabusObjectById(usm.id, contentInfo);\n                        }\n                    }\n                }\n            }\n            else {\n                if (content.isValidated === true) { //onaylanmış bir şeyi vakıf iptal edecek.\n                    if (this.userId !== undefined) {\n                        //vakıf daha önceden bir talebesi için onayladığı content'i iptal edecek.\n                        if (content.syllabusId !== undefined)\n                            await AdminDeleteUserSyllabusObjectById(content.syllabusId);\n                    }\n                }\n            }\n        });\n        this.$router.go(-1);\n    }\n    async created() {\n        try {\n            const { data } = await GetContentsBySyllabusId(this.courseId);\n            this.contentList = data;\n            if (this.userId === undefined) {\n            }\n            else { // talebe işlemlerinden geldi.\n                const { data } = await AdminGetUserSyllabusAsync({ user: this.userId, content__syllabus: this.courseId });\n                this.completedList = data;\n                console.log(this.completedList);\n                this.compareContentArrays();\n            }\n        }\n        catch (e) {\n            console.error(\"coursecontent \" + e);\n        }\n    }\n};\ntslib_1.__decorate([\n    Prop(String)\n], CourseContent.prototype, \"userId\", void 0);\ntslib_1.__decorate([\n    Prop(String)\n], CourseContent.prototype, \"userName\", void 0);\ntslib_1.__decorate([\n    Prop(String)\n], CourseContent.prototype, \"courseId\", void 0);\nCourseContent = tslib_1.__decorate([\n    Component\n], CourseContent);\nexport default CourseContent;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coursecontent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coursecontent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./coursecontent.vue?vue&type=template&id=4d651454&scoped=true&\"\nimport script from \"./coursecontent.vue?vue&type=script&lang=ts&\"\nexport * from \"./coursecontent.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d651454\",\n  null\n  \n)\n\nexport default component.exports","import service from \"@/utils/request\";\nexport const GetLevelsAsync = () => service.request({\n    url: '/api/syllabus/levels/',\n    method: 'get'\n});\nexport const GetCoursesByLevelAsync = (level) => service.request(({\n    url: `/api/syllabus/level/${level}/courses/`,\n    method: 'get'\n}));\nexport const GetContentsBySyllabusId = (sylId) => service.request({\n    url: `/api/syllabus/${sylId}/contents/`,\n    method: 'get'\n});\nexport const AdminGetUserSyllabusAsync = (urlParams) => service.request({\n    url: '/api/admin/user-syllabus/',\n    method: 'get',\n    params: urlParams\n});\nexport const AdminCreateUserSyllabus = (contentInfo) => service.request({\n    url: '/api/admin/user-syllabus/',\n    method: 'post',\n    data: contentInfo\n});\nexport const AdminValidateUserSyllabusObjectById = (id, contentInfo) => service.request({\n    url: `/api/admin/user-syllabus/${id}/validate/`,\n    method: 'put',\n    data: contentInfo\n});\nexport const AdminDeleteUserSyllabusObjectById = (id) => service.request({\n    url: `/api/admin/user-syllabus/${id}/`,\n    method: 'delete'\n});\n","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n"],"sourceRoot":""}