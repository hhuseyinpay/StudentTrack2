{"version":3,"sources":["webpack:///./src/api/syllabus.ts","webpack:///./node_modules/core-js/modules/es6.array.find.js","webpack:///./src/views/syllabus/coursecontent.vue?93a5","webpack:///./src/views/syllabus/coursecontent.vue","webpack:///./src/views/syllabus/coursecontent.vue?3ef7","webpack:///./src/views/syllabus/coursecontent.vue?a6b8"],"names":["__webpack_require__","d","__webpack_exports__","GetLevelsAsync","GetCoursesByLevelAsync","GetContentsBySyllabusId","AdminGetUserSyllabusAsync","AdminCreateUserSyllabus","AdminValidateUserSyllabusObjectById","AdminDeleteUserSyllabusObjectById","_utils_request__WEBPACK_IMPORTED_MODULE_0__","service","request","url","method","level","concat","sylId","urlParams","params","contentInfo","data","id","$export","$find","KEY","forced","Array","P","F","find","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","attrs","type","justify","align","xs","sm","md","lg","ref","staticStyle","width","contentList","on","select","handleSelection","property","label","scopedSlots","_u","key","fn","scope","row","isValidated","_v","_s","tagStatus","margin-top","click","$event","SendContents","staticRenderFns","CourseContent","_Vue","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","selectedContentList","completedList","componentKey","updated","inherits","createClass","value","isChecked","rows","_this2","forEach","$refs","multipleTable","toggleRowSelection","selection","console","log","col","evt","_this3","finalArray","completedContent","content","push","is_validated","syllabusId","waitForValidate","toggleSelection","_SendContents","asyncToGenerator","regeneratorRuntime","mark","_callee2","_this4","wrap","_context2","prev","next","_ref","_callee","index","_ref2","usm","_ref3","_context","c","userId","sent","stop","_x","_x2","$message","message","duration","_created","_callee3","_ref4","_ref5","_data","_context3","courseId","cl","user","content__syllabus","compareContentArrays","t0","error","created","Vue","tslib_1","Prop","String","prototype","Component","syllabus_coursecontentvue_type_script_lang_ts_","component","componentNormalizer"],"mappings":"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","file":"js/chunk-fda952d4.32eaedbc.js","sourcesContent":["import service from \"@/utils/request\";\nexport const GetLevelsAsync = () => service.request({\n    url: '/api/syllabus/levels/',\n    method: 'get'\n});\nexport const GetCoursesByLevelAsync = (level) => service.request(({\n    url: `/api/syllabus/level/${level}/courses/`,\n    method: 'get'\n}));\nexport const GetContentsBySyllabusId = (sylId) => service.request({\n    url: `/api/syllabus/${sylId}/contents/`,\n    method: 'get'\n});\nexport const AdminGetUserSyllabusAsync = (urlParams) => service.request({\n    url: '/api/admin/user-syllabus/',\n    method: 'get',\n    params: urlParams\n});\nexport const AdminCreateUserSyllabus = (contentInfo) => service.request({\n    url: '/api/admin/user-syllabus/',\n    method: 'post',\n    data: contentInfo\n});\nexport const AdminValidateUserSyllabusObjectById = (id, contentInfo) => service.request({\n    url: `/api/admin/user-syllabus/${id}/validate/`,\n    method: 'put',\n    data: contentInfo\n});\nexport const AdminDeleteUserSyllabusObjectById = (id) => service.request({\n    url: `/api/admin/user-syllabus/${id}/`,\n    method: 'delete'\n});\n","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"align\":\"center\",\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12}},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.contentList},on:{\"select\":_vm.handleSelection}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"property\":\"name\",\"label\":\"Content\"}}),_c('el-table-column',{attrs:{\"label\":\"Status\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.isValidated === true ? 'success' : 'warning'}},[_vm._v(\"\\n                            \"+_vm._s(_vm.tagStatus(scope.row))+\"\\n                        \")])]}}])})],1)],1)],1),_c('el-row',[_c('el-col',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.SendContents()}}},[_vm._v(\"Save\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as tslib_1 from \"tslib\";\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { AdminCreateUserSyllabus, AdminDeleteUserSyllabusObjectById, AdminGetUserSyllabusAsync, AdminValidateUserSyllabusObjectById, GetContentsBySyllabusId } from \"@/api/syllabus\";\nlet CourseContent = class CourseContent extends Vue {\n    constructor() {\n        super(...arguments);\n        this.contentList = [];\n        this.selectedContentList = [];\n        this.completedList = [];\n        this.componentKey = 1;\n        this.updated = true;\n    }\n    tagStatus(row) {\n        if (row.isValidated === true)\n            return 'Approved';\n        else {\n            if (row.isChecked)\n                return 'Waiting For Approval';\n            return 'Uncompleted.';\n        }\n    }\n    toggleSelection(rows) {\n        rows.forEach(row => {\n            this.$refs.multipleTable.toggleRowSelection(row, true);\n        });\n    }\n    handleSelection(selection) {\n        console.log(\"handle\");\n        this.selectedContentList = selection;\n    }\n    handleRowClick(row, col, evt) {\n        this.$refs.multipleTable.toggleRowSelection(row);\n    }\n    compareContentArrays() {\n        const finalArray = [];\n        //setTimeout(() => ( console.log(\"wait\") ), 1000);\n        this.completedList.forEach(completedContent => this.contentList.forEach(content => {\n            if (completedContent.content === content.id) {\n                finalArray.push(content);\n                content.isValidated = completedContent.is_validated === true;\n                content.isChecked = true;\n                content.syllabusId = completedContent.id;\n                content.waitForValidate = content.isChecked && !content.isValidated;\n            }\n        }));\n        this.toggleSelection(finalArray);\n    }\n    async SendContents() {\n        this.contentList.forEach(async (content, index) => {\n            const isChecked = this.selectedContentList.find((c) => {\n                return c.id == content.id;\n            });\n            if (isChecked) {\n                if (content.isValidated === false) {\n                    // daha önceden göndermedi.\n                    if (content.waitForValidate === false) {\n                        let contentInfo = {\n                            content: content.id\n                        };\n                        if (this.userId === undefined) {\n                        }\n                        else {\n                            contentInfo[\"user\"] = this.userId;\n                            const { data: usm } = await AdminCreateUserSyllabus(contentInfo);\n                            const { data } = await AdminValidateUserSyllabusObjectById(usm.id, contentInfo);\n                            this.contentList[index].isValidated = true;\n                        }\n                    }\n                }\n            }\n            else {\n                if (content.isValidated === true) {\n                    if (this.userId !== undefined) {\n                        if (content.syllabusId !== undefined) {\n                            await AdminDeleteUserSyllabusObjectById(content.syllabusId);\n                            this.contentList[index].isValidated = true;\n                        }\n                    }\n                }\n            }\n        });\n        this.$message({\n            message: 'Saved successfully!',\n            type: 'success',\n            duration: 1000,\n        });\n    }\n    async created() {\n        try {\n            const { data } = await GetContentsBySyllabusId(this.courseId);\n            this.contentList = data;\n            this.contentList.forEach(cl => {\n                cl.waitForValidate = false;\n                cl.isValidated = false;\n                cl.isChecked = false;\n            });\n            if (this.userId === undefined) {\n            }\n            else { // talebe işlemlerinden geldi.\n                const { data } = await AdminGetUserSyllabusAsync({ user: this.userId, content__syllabus: this.courseId });\n                this.completedList = data;\n                console.log(this.completedList);\n                this.compareContentArrays();\n            }\n        }\n        catch (e) {\n            console.error(\"coursecontent \" + e);\n        }\n    }\n};\ntslib_1.__decorate([\n    Prop(String)\n], CourseContent.prototype, \"userId\", void 0);\ntslib_1.__decorate([\n    Prop(String)\n], CourseContent.prototype, \"userName\", void 0);\ntslib_1.__decorate([\n    Prop(String)\n], CourseContent.prototype, \"courseId\", void 0);\nCourseContent = tslib_1.__decorate([\n    Component\n], CourseContent);\nexport default CourseContent;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coursecontent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coursecontent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./coursecontent.vue?vue&type=template&id=eb55d4a6&scoped=true&\"\nimport script from \"./coursecontent.vue?vue&type=script&lang=ts&\"\nexport * from \"./coursecontent.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb55d4a6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}